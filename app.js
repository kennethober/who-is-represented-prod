import{partial as e,collectUnique as t}from"./node_modules/@kennethober/helpers/index.js";import o from"./state-data.js";const s=(e,t)=>e.concat((e=>Array.from(document.querySelectorAll(e)))(t)),l=e=>{let t=!0;return()=>{t&&(t=!1,window.fathom.trackGoal(e,0))}},n=l("EURO0KBA"),a=e=>e.dataset.abbreviation,c=e=>{const t=[...document.querySelectorAll("#state-list .selected")].map(a);window.history.replaceState(null,"",`?s=${t.join("_")}`);const s=t.map((e=>o[e])),l=i(s);A(d,l),n()};(({selectors:o,commonAttribute:l,selectClass:n,hoverClass:a,onSelect:c,onDeselect:r})=>{const i=o.reduce(s,[]),d=t(i.map((e=>[e.getAttribute(l),e]))),u=e=>{d[e.getAttribute(l)].forEach((e=>e.classList.toggle(n))),e.classList.contains(n)?c(e):r(e)},m=e=>{d[e.getAttribute(l)].forEach((e=>e.classList.add(a)))},p=e=>{d[e.getAttribute(l)].forEach((e=>e.classList.remove(a)))};i.forEach((t=>{t.addEventListener("click",e(u,t)),t.addEventListener("mouseenter",e(m,t)),t.addEventListener("mouseleave",e(p,t))}))})({selectors:["#state-map [data-abbreviation]","#state-list .state"],commonAttribute:"data-abbreviation",selectClass:"selected",hoverClass:"hovered",onSelect:c,onDeselect:c});const r=(e,{population:t,senate:o,house:s,electoral:l})=>(e.population+=t,e.senate+=o,e.house+=s,e.electoral+=l,e),i=e=>e.reduce(r,{population:0,house:0,senate:0,electoral:0}),d=i(Object.values(o)),u=l("6NCEYFOX");document.getElementById("reset").addEventListener("click",(()=>{window.history.replaceState(null,"","/");Array.from(document.querySelectorAll(".selected")).forEach((e=>e.classList.toggle("selected"))),A(d,i([])),u()}));const m=l("IUIHGOY5");let p="map";const y=document.getElementById("toggle");y.addEventListener("click",(()=>{const e=document.querySelector("#state-map"),t=document.querySelector("#state-list");"map"===p?(e.style.display="none",t.style.display="flex",y.textContent="Show Map",p="list"):(e.style.display="block",t.style.display="none",y.textContent="Show List",p="map"),m()}));const h=l("9O18AIJO");let b="barSection";const S=document.getElementById("bar-toggle");S.addEventListener("click",(()=>{const e=document.querySelector("#bar-section"),t=document.querySelector("#thresholds");"barSection"===b?(e.style.display="none",t.style.display="unset",S.textContent="Show Bars",b="thresholds"):(e.style.display="flex",t.style.display="none",S.textContent="Show Thresholds",b="barSection"),h()}));const E=l("F7FY2KUM"),v=document.querySelector("#fullscreen");document.fullscreenEnabled&&document.documentElement.requestFullscreen&&document.exitFullscreen?v.addEventListener("click",(()=>{document.fullscreenElement?document.exitFullscreen():document.documentElement.requestFullscreen(),E()})):v.classList.add("hidden");const f=(e,t,o)=>t[o]/e[o]*100,g=(e,t,o)=>{document.querySelector(o).textContent=e.toFixed(2)+"%",document.querySelector(t).style.width=e+"%"},L=(e,t)=>{const o=document.querySelector(e);t?o.classList.add("active"):o.classList.remove("active")},A=(t,o)=>{const s=e(f,t,o),l=s("population"),n=s("electoral"),a=s("senate"),c=s("house");g(l,"#pop-bar","#pop-percent"),g(n,"#electoral-bar","#electoral-percent"),g(a,"#senate-bar","#senate-percent"),g(c,"#house-bar","#house-percent");const r=2/3*100;L("#can-filibuster",a>40),L("#senate-majority",a>50),L("#can-stop-filibuster",a>=60),L("#electoral-majority",n>50),L("#house-majority",c>50),L("#can-stop-veto",c>=r&&a>=r)},q=e=>`#state-list [data-abbreviation=${e}]`,w=new URLSearchParams(window.location.search);if(w.has("s")&&w.get("s").length>1){const e=w.get("s").split("_").map(q).join(",");Array.from(document.querySelectorAll(e)).forEach((e=>e.click()))}