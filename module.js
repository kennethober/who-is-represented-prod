import e from"./state-data.js";const t=(e,t)=>e.concat((e=>Array.from(document.querySelectorAll(e)))(t)),o=(e,t,o)=>{const l=o.getAttribute(e);return t[l]??=[],t[l].push(o),t},l=t=>e[t.dataset.abbreviation];let s=!0;const n=e=>{const t=Array.from(document.querySelectorAll("li.selected")).map(l),o=c(t);S(r,o),s&&(s=!1,window.fathom.trackGoal("EURO0KBA",0))};(({selectors:e,commonAttribute:l,selectClass:s,hoverClass:n,onSelect:a,onDeselect:c})=>{const r=e.reduce(t,[]),i=r.reduce(o.bind(null,l),{}),d=e=>{i[e.getAttribute(l)].forEach((e=>e.classList.toggle(s))),e.classList.contains(s)?a(e):c(e)},u=e=>{i[e.getAttribute(l)].forEach((e=>e.classList.toggle(n)))};r.forEach((e=>{e.addEventListener("click",d.bind(null,e)),e.addEventListener("mouseenter",u.bind(null,e)),e.addEventListener("mouseleave",u.bind(null,e))}))})({selectors:["svg [data-abbreviation]","li.state"],commonAttribute:"data-abbreviation",selectClass:"selected",hoverClass:"hovered",onSelect:n,onDeselect:n});const a=(e,{population:t,senate:o,house:l,electoral:s})=>(e.population+=t,e.senate+=o,e.house+=l,e.electoral+=s,e),c=e=>e.reduce(a,{population:0,house:0,senate:0,electoral:0}),r=c(Object.values(e));let i=!0;document.getElementById("reset").addEventListener("click",(()=>{Array.from(document.querySelectorAll(".selected")).forEach((e=>e.classList.toggle("selected"))),S(r,c([])),i&&(i=!1,window.fathom.trackGoal("6NCEYFOX",0))}));let d=!0,u="map";const m=document.getElementById("toggle");m.addEventListener("click",(()=>{const e=document.querySelector("svg"),t=document.querySelector("#state-list");"map"===u?(e.style.display="none",t.style.display="flex",m.textContent="Show Map",u="list"):(e.style.display="block",t.style.display="none",m.textContent="Show List",u="map"),d&&(d=!1,window.fathom.trackGoal("IUIHGOY5",0))}));let y=!0,p="barSection";const h=document.getElementById("bar-toggle");h.addEventListener("click",(()=>{const e=document.querySelector("#bar-section"),t=document.querySelector("#thresholds");"barSection"===p?(e.style.display="none",t.style.display="grid",h.textContent="Show Bars",p="thresholds"):(e.style.display="flex",t.style.display="none",h.textContent="Show Thresholds",p="barSection"),y&&(y=!1,window.fathom.trackGoal("9O18AIJO",0))}));const b=(e,t,o)=>t[o]/e[o]*100,v=(e,t,o)=>{document.querySelector(o).textContent=e.toFixed(2)+"%",document.querySelector(t).style.width=e+"%"},g=(e,t)=>{const o=document.querySelector(e);t?o.classList.add("active"):o.classList.remove("active")},S=(e,t)=>{const o=b.bind(null,e,t),l=o("population"),s=o("electoral"),n=o("senate"),a=o("house");v(l,"#pop-bar","#pop-percent"),v(s,"#electoral-bar","#electoral-percent"),v(n,"#senate-bar","#senate-percent"),v(a,"#house-bar","#house-percent");const c=2/3*100;g("#can-filibuster",n>40),g("#senate-majority",n>50),g("#can-stop-filibuster",n>=60),g("#electoral-majority",s>50),g("#house-majority",a>50),g("#can-stop-veto",a>=c&&n>=c)};