import e from"./state-data.js";const t=(e,t)=>e.concat((e=>Array.from(document.querySelectorAll(e)))(t)),o=(e,t,o)=>{const s=o.getAttribute(e);return t[s]??=[],t[s].push(o),t},s=t=>e[t.dataset.abbreviation],l=e=>{const t=Array.from(document.querySelectorAll("li.selected")).map(s),o=c(t);b(a,o)};(({selectors:e,commonAttribute:s,selectClass:l,hoverClass:n,onSelect:c,onDeselect:a})=>{const r=e.reduce(t,[]),i=r.reduce(o.bind(null,s),{}),d=e=>{i[e.getAttribute(s)].forEach((e=>e.classList.toggle(l))),e.classList.contains(l)?c(e):a(e)},u=e=>{i[e.getAttribute(s)].forEach((e=>e.classList.toggle(n)))};r.forEach((e=>{e.addEventListener("click",d.bind(null,e)),e.addEventListener("mouseenter",u.bind(null,e)),e.addEventListener("mouseleave",u.bind(null,e))}))})({selectors:["svg [data-abbreviation]","li.state"],commonAttribute:"data-abbreviation",selectClass:"selected",hoverClass:"hovered",onSelect:l,onDeselect:l});const n=(e,{population:t,senate:o,house:s,electoral:l})=>(e.population+=t,e.senate+=o,e.house+=s,e.electoral+=l,e),c=e=>e.reduce(n,{population:0,house:0,senate:0,electoral:0}),a=c(Object.values(e));document.getElementById("reset").addEventListener("click",(()=>{Array.from(document.querySelectorAll(".selected")).forEach((e=>e.classList.toggle("selected"))),b(a,c([]))}));let r="map";const i=document.getElementById("toggle");i.addEventListener("click",(()=>{const e=document.querySelector("svg"),t=document.querySelector("#state-list");"map"===r?(e.style.display="none",t.style.display="flex",i.textContent="Show Map",r="list"):(e.style.display="block",t.style.display="none",i.textContent="Show List",r="map")}));let d="barSection";const u=document.getElementById("bar-toggle");u.addEventListener("click",(()=>{const e=document.querySelector("#bar-section"),t=document.querySelector("#thresholds");"barSection"===d?(e.style.display="none",t.style.display="grid",u.textContent="Show Bars",d="thresholds"):(e.style.display="flex",t.style.display="none",u.textContent="Show Thresholds",d="barSection")}));const y=(e,t,o)=>t[o]/e[o]*100,m=(e,t,o)=>{document.querySelector(o).textContent=e.toFixed(2)+"%",document.querySelector(t).style.width=e+"%"},p=(e,t)=>{const o=document.querySelector(e);t?o.classList.add("active"):o.classList.remove("active")},b=(e,t)=>{const o=y.bind(null,e,t),s=o("population"),l=o("electoral"),n=o("senate"),c=o("house");m(s,"#pop-bar","#pop-percent"),m(l,"#electoral-bar","#electoral-percent"),m(n,"#senate-bar","#senate-percent"),m(c,"#house-bar","#house-percent");const a=2/3*100;p("#can-filibuster",n>40),p("#senate-majority",n>50),p("#can-stop-filibuster",n>=60),p("#electoral-majority",l>50),p("#house-majority",c>50),p("#can-stop-veto",c>=a&&n>=a)};